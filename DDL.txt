CREATE TABLE  "DB_CAR" 
   (    "CARID" NUMBER(*,0) NOT NULL ENABLE, 
    "CARREGNO" VARCHAR2(10) NOT NULL ENABLE, 
    "MANUFACTURERNAME" VARCHAR2(25), 
    "MODALNAME" VARCHAR2(25) NOT NULL ENABLE, 
    "CLASSNAME" VARCHAR2(25) NOT NULL ENABLE, 
    "CENTER" VARCHAR2(15), 
    "YEAR" DATE NOT NULL ENABLE, 
    "EXTERNAL" VARCHAR2(3), 
    "PHASEOUT" VARCHAR2(3), 
    "PIC" BLOB, 
    "RENT" NUMBER(3,0), 
    "FK1_FLEETID" NUMBER, 
     CONSTRAINT "PK_DB_CAR" PRIMARY KEY ("CARID")
  USING INDEX  ENABLE, 
     CONSTRAINT "DB_CAR_CARREGNO" UNIQUE ("CARREGNO")
  USING INDEX  ENABLE
   )
/

CREATE OR REPLACE EDITIONABLE TRIGGER  "DB_CAR_T1" 
BEFORE 
insert on DB_CAR 
for each row 
begin 
  if :NEW.CARID is null then  
    select DB_CAR_SEQ.nextval into :NEW.CARID from sys.dual;  
  end if;  
end;

/
ALTER TRIGGER  "DB_CAR_T1" ENABLE
/
CREATE TABLE  "DB_CUSTOMER" 
   (    "CUSTOMERID" NUMBER(*,0) NOT NULL ENABLE, 
    "CUSTOMERTYPE" VARCHAR2(20) NOT NULL ENABLE, 
    "FIRSTNAME" VARCHAR2(15), 
    "LASTNAME" VARCHAR2(15), 
    "EMAIL" VARCHAR2(25), 
    "ADDRESS" VARCHAR2(50) NOT NULL ENABLE, 
    "CITY" VARCHAR2(20) NOT NULL ENABLE, 
    "STATE" VARCHAR2(25) NOT NULL ENABLE, 
    "POSTALCODE" VARCHAR2(20), 
    "COUNTRY" VARCHAR2(25) NOT NULL ENABLE, 
    "PHONE" VARCHAR2(13), 
    "CORPADDRESS" VARCHAR2(25), 
    "COMPANYNAME" VARCHAR2(25), 
    "PAYEEORG" VARCHAR2(25), 
    "TAGS" VARCHAR2(25), 
     CONSTRAINT "PK_DB_CUSTOMER" PRIMARY KEY ("CUSTOMERID")
  USING INDEX  ENABLE
   )
/

CREATE OR REPLACE EDITIONABLE TRIGGER  "DB_CUSTOMER_T1" 
BEFORE 
insert on DB_CUSTOMER 
for each row 
begin 
  if :NEW.CUSTOMERID is null then  
    select DB_CUSTOMER_SEQ.nextval into :NEW.CUSTOMERID from sys.dual;  
  end if;  
end;

/
ALTER TRIGGER  "DB_CUSTOMER_T1" ENABLE
/
CREATE TABLE  "DB_CARCENTRE" 
   (    "CENTREID" NUMBER(*,0) NOT NULL ENABLE, 
    "CENTERNAME" VARCHAR2(25), 
    "COUNTRY" VARCHAR2(50), 
    "STATE" VARCHAR2(50), 
    "CITY" VARCHAR2(50), 
    "CENTERADDRESS" VARCHAR2(50), 
     CONSTRAINT "PK_DB_CARCENTRE" PRIMARY KEY ("CENTREID")
  USING INDEX  ENABLE
   )
/

CREATE OR REPLACE EDITIONABLE TRIGGER  "DB_CARCENTRE_T1" 
BEFORE 
insert on DB_CARCENTRE
for each row 
begin 
  if :NEW.CENTREID is null then  
    select DB_CARCENTRE_SEQ.nextval into :NEW.CENTREID from sys.dual;  
  end if;  
end;

/
ALTER TRIGGER  "DB_CARCENTRE_T1" ENABLE
/
CREATE TABLE  "DB_FLEET" 
   (    "FLEETID" NUMBER(*,0) NOT NULL ENABLE, 
    "FLEETNAME" VARCHAR2(25) NOT NULL ENABLE, 
    "CARID" NUMBER(*,0), 
    "FK1_ACCOUNTID" NUMBER(*,0)
   )
/
CREATE TABLE  "DB_BOOKING" 
   (    "BOOKINGID" NUMBER(*,0) NOT NULL ENABLE, 
    "HIREDAYS" NUMBER(*,0) NOT NULL ENABLE, 
    "PICKUPCENTRE" VARCHAR2(25) NOT NULL ENABLE, 
    "DROPCENTRE" VARCHAR2(25) NOT NULL ENABLE, 
    "HIREDATETIME" TIMESTAMP (8), 
    "BOOKINGDATE" TIMESTAMP (8) NOT NULL ENABLE, 
    "HIRECOUNTRY" VARCHAR2(50), 
    "DELIVERYREQUIRED" VARCHAR2(3), 
    "UNLIMITEDMILEAGE" VARCHAR2(3), 
    "CONTRACTEDMILAGE" VARCHAR2(3), 
    "FK1_CARID" NUMBER(*,0), 
    "FK2_CENTREID" NUMBER(*,0), 
    "FK3_FLEETID" NUMBER(*,0), 
    "FK4_CUSTOMERID" NUMBER(*,0) NOT NULL ENABLE, 
    "TAGS" VARCHAR2(25), 
    "COST" NUMBER, 
    "FROMDATE" DATE, 
    "TODATE" DATE, 
    "STATUS" VARCHAR2(15), 
     CONSTRAINT "PK_DB_BOOKING" PRIMARY KEY ("BOOKINGID")
  USING INDEX  ENABLE
   )
/
ALTER TABLE  "DB_BOOKING" ADD CONSTRAINT "FK1_DB_BOOKING_TO_DB_CAR" FOREIGN KEY ("FK1_CARID")
      REFERENCES  "DB_CAR" ("CARID") ON DELETE CASCADE ENABLE
/
ALTER TABLE  "DB_BOOKING" ADD CONSTRAINT "FK4_DB_BOOKING_TO_DB_CUSTOMER" FOREIGN KEY ("FK4_CUSTOMERID")
      REFERENCES  "DB_CUSTOMER" ("CUSTOMERID") ON DELETE CASCADE ENABLE
/

CREATE OR REPLACE EDITIONABLE TRIGGER  "DB_BOOKING_T1" 
BEFORE 
insert on DB_BOOKING 
for each row 
begin 
  if :NEW.BOOKINGID is null then  
    select DB_BOOKING_SEQ.nextval into :NEW.BOOKINGID from sys.dual;  
  end if;  
end;



/
ALTER TRIGGER  "DB_BOOKING_T1" ENABLE
/
CREATE TABLE  "DB_ADDITIONALACCESSORIES" 
   (    "ACCESSORYID" NUMBER(*,0), 
    "ACCESSORYNAME" VARCHAR2(25), 
    "COST" NUMBER(8,2), 
    "UNITS" NUMBER(*,0), 
    "FK1_BOOKINGID" NUMBER(*,0), 
    "FK2_CARID" NUMBER(*,0), 
    "FK3_CUSTOMERID" NUMBER(*,0), 
     CONSTRAINT "PK_DB_ADDITIONALACCESSORIES" PRIMARY KEY ("ACCESSORYID")
  USING INDEX  ENABLE
   )
/
ALTER TABLE  "DB_ADDITIONALACCESSORIES" ADD CONSTRAINT "FK1_DB_ADDITIONALACCESSORIES_TO_DB_BOOKING" FOREIGN KEY ("FK1_BOOKINGID")
      REFERENCES  "DB_BOOKING" ("BOOKINGID") ON DELETE CASCADE ENABLE
/
ALTER TABLE  "DB_ADDITIONALACCESSORIES" ADD CONSTRAINT "FK3_DB_ADDITIONALACCESSORIES_TO_DB_CUSTOMER" FOREIGN KEY ("FK3_CUSTOMERID")
      REFERENCES  "DB_CUSTOMER" ("CUSTOMERID") ON DELETE CASCADE ENABLE
/

CREATE OR REPLACE EDITIONABLE TRIGGER  "DB_ADDITIONALACCESSORIES_T1" 
BEFORE 
insert on DB_ADDITIONALACCESSORIES 
for each row 
begin 
  if :NEW.ACCESSORYID is null then  
    select DB_ADDITIONALACCESSORIES_SEQ.nextval into :NEW.ACCESSORYID from sys.dual;  
  end if;  
end;

/
ALTER TRIGGER  "DB_ADDITIONALACCESSORIES_T1" ENABLE
/
